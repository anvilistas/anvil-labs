function y(){let{ffi:{proxy:e,toPy:t},abstr:{setUpModuleMethods:n,objectSetItem:r},misceval:{promiseToSuspension:s,chain:i}}=Sk,o={__name__:t("js"),window:e(self)};async function l(c){let a=await new Function("return import("+JSON.stringify(c.toString())+")").call(null);return e(a)}return n("js",o,{await_promise:{$meth(c){let a=c.valueOf();return a instanceof Promise||a&&a.then&&typeof a.then=="function"?i(s(a),O=>t(O,{dictHook:j=>e(j)})):c},$flags:{OneArg:!0}},import_from:{$meth(c){return s(l(c))},$flags:{OneArg:!0}}}),r(Sk.sysmodules,t("anvil.js.window"),o.window),o}function _(){let{ffi:{toPy:e,toJs:t},abstr:{setUpModuleMethods:n}}=Sk,r={__name__:new e("json")};return n("js",r,{dumps:{$meth(s){return new e(JSON.stringify(t(s)))},$flags:{OneArg:!0}},loads:{$meth(s){return e(JSON.parse(s.toString()))},$flags:{OneArg:!0}}}),r}var v=new Map([["src/lib/json.js",`var $builtinmodule=${_};`],["src/lib/anvil/__init__.py","def is_server_side():return False"],["src/lib/anvil/js.js",`var $builtinmodule=${y};`],["src/lib/anvil/tz.py",`import datetime,time
class tzoffset(datetime.tzinfo):
	def __init__(A,**B):A._offset=datetime.timedelta(**B)
	def utcoffset(A,dt):return A._offset
	def dst(A,dt):return datetime.timedelta()
	def tzname(A,dt):return None
class tzlocal(tzoffset):
	def __init__(B):
		if time.localtime().tm_isdst and time.daylight:A=-time.altzone
		else:A=-time.timezone
		tzoffset.__init__(B,seconds=A)
class tzutc(tzoffset):0
UTC=tzutc()`],["src/lib/anvil/server.py",`class SerializationError(Exception):0
def get_app_origin():return self.anvilAppOrigin
def get_api_origin():return get_app_origin()+'/_/api'
def call(*args,**kws):
	from anvil_labs.kompot import preserve,reconstruct,serialize;name,*args=args;rv=self.fetch(get_api_origin()+f"/anvil_labs_private_call?name={name}",{'headers':{'Content-Type':'application/json'},'method':'POST','body':self.JSON.stringify(preserve([args,kws]))});result,error=rv.json()
	if error:raise Exception(error)
	return reconstruct(dict(result))
def portable_class(cls,name=None):
	if name is None and isinstance(cls,str):name=cls;return lambda cls:cls
	else:return cls`]]);importScripts("https://anvil.works/runtime-new/runtime/js/lib/skulpt.min.js","https://cdn.jsdelivr.net/npm/localforage@1.10.0/dist/localforage.min.js","https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuid.min.js");var f=localforage.createInstance({name:"anvil-labs-sw",storeName:"lib"}),k=d();function d(){let e={resolve:()=>{},reject:()=>{}};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}var p=new Map;function E(e){let t=Math.random().toString(36).substring(6);self.postMessage({type:"IMPORT",id:t,filename:e});let n=d();return p.set(t,n),n.promise}var m=e=>{var o,l;let{builtin:{BaseException:t},ffi:{toJs:n}}=Sk,r,s,i;e instanceof t?(s=n(e.args),r=e.tp$name,i=e.traceback):(r=(l=(o=e.constructor)==null?void 0:o.name)!=null?l:"<unknown>",s=e.message?[e.message]:[]),self.postMessage({type:"ERROR",errorType:r,errorArgs:s,errorTb:i})};async function I(e){return await f.getItem(e)}function S(){Sk.configure({output(e){return self.postMessage({type:"OUT",message:e})},yieldLimit:300,syspath:["app"],read(e){let t=v.get(e);return t!==void 0?t:Sk.misceval.promiseToSuspension(I(e).then(n=>n!=null?n:E(e).then(r=>(f.setItem(e,r!=null?r:0),r))).then(n=>{if(n==null||n===0)throw"No module named "+e;return n}))},uncaughtException:e=>{m(e)}}),Sk.builtins.self=Sk.ffi.proxy(self),k.resolve(!0)}function T(e){let{data:t}=e;if(t.type==="MODULE"){let{id:n,content:r}=t,s=p.get(n);if(s===void 0)return;let{resolve:i}=s;p.delete(n),i(r)}}self.addEventListener("message",T);self.window=self;self.anvilAppOrigin="";var g=!1;async function b(e){g=!0,await u.setItem("__main__",e);try{await N(()=>x(e,!1,!0))}catch(t){console.error(t),m(t)}}var{builtin:{func:L},misceval:{asyncToPromise:N},importMain:x}=Sk;S();P();function P(){function e(t,n=[]){if(t.length!==1)throw new Sk.builtin.TypeError("Expeceted one arg to raise_event");let r={};for(let s=0;s<n.length;s+=2){let i=n[s],o=n[s+1];r[i]=Sk.ffi.toJs(o)}A(t[0].toString(),r)}e.co_fastcall=!0,self.raise_event=new L(e),self.sync_event_handler=t=>n=>n.waitUntil(t(n))}var u=localforage.createInstance({name:"anvil-labs-sw",storeName:"locals"});async function D(e){let t=e.data,{type:n}=t;if(n!=="INIT")return;let{name:r}=t;await f.clear(),await b(r)}self.addEventListener("message",D);self.addEventListener("activate",e=>{console.log("%cSW ACTIVATED","color: hotpink;")});async function z(e){let t=e.data,{type:n}=t;if(n!=="APPORIGIN")return;let{origin:r}=t;self.anvilAppOrigin=r,await u.setItem("apporigin",r)}self.addEventListener("message",z);async function h(e){e.ANVIL_LABS=!0;let t=await self.clients.matchAll({includeUncontrolled:!0,type:"window"});for(let n of t)n.postMessage(e)}self.postMessage=h;function A(e,t={}){t.event_name=e,h({type:"EVENT",name:e,kws:t})}function w(e,t){var r;let{get:n}=(r=Object.getOwnPropertyDescriptor(self,e))!=null?r:{};delete self[e],Object.defineProperty(self,e,{get:n,set:t,configurable:!0})}function M(e){var i;let t="on"+e,n=d(),{set:r}=(i=Object.getOwnPropertyDescriptor(self,t))!=null?i:{},s;self[t]=o=>{g||(s=o,U(),setTimeout(()=>{n.resolve("timeout")},5e3),o.waitUntil(n.promise))},w(t,async o=>{if(w(t,r),self[t]=o,!!s)try{await o(s),n.resolve(null)}catch(l){n.reject(l)}}),self.addEventListener(e,o=>{A(e,{tag:o.tag})})}M("sync");M("periodicsync");async function U(){let e=await u.getItem("apporigin");if(self.anvilAppOrigin=e!=null?e:"",g)return;let t=await u.getItem("__main__");t&&await b(t)}console.log("%cRUNNING SW SCRIPT","color: green;");
