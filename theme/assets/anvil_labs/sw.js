function d(){let{ffi:{proxy:e,toPy:n},abstr:{setUpModuleMethods:t,objectSetItem:s},misceval:{promiseToSuspension:r,chain:o}}=Sk,c={__name__:n("js"),window:e(self)};async function v(a){let i=await new Function("return import("+JSON.stringify(a.toString())+")").call(null);return e(i)}return t("js",c,{await_promise:{$meth(a){let i=a.valueOf();return i instanceof Promise||i&&i.then&&typeof i.then=="function"?o(r(i),S=>n(S,{dictHook:w=>e(w)})):a},$flags:{OneArg:!0}},import_from:{$meth(a){return r(v(a))},$flags:{OneArg:!0}}}),s(Sk.sysmodules,n("anvil.js.window"),c.window),c}var u=new Map([["src/lib/anvil/__init__.py",""],["src/lib/anvil/js.js",`var $builtinmodule=${d};`],["src/lib/anvil/server.py",""]]);var _=p();function p(){let e={resolve:()=>{},reject:()=>{}};return e.promise=new Promise((n,t)=>{e.resolve=n,e.reject=t}),e}var l=new Map;function M(e){let n=crypto.randomUUID();self.postMessage({type:"IMPORT",id:n,filename:e});let t=p();return l.set(n,t),t.promise}var f=e=>{let{builtin:{BaseException:n},ffi:{toJs:t}}=Sk,s,r,o;e instanceof n?(r=t(e.args),s=e.tp$name,o=e.traceback):(s=e.constructor?.name??"<unknown>",r=e.message?[e.message]:[]),self.postMessage({type:"ERROR",errorType:s,errorArgs:r,errorTb:o})};function y(){Sk.configure({output(e){return self.postMessage({type:"OUT",message:e})},yieldLimit:300,syspath:["app"],read(e){let n=u.get(e);return n!==void 0?n:Sk.misceval.promiseToSuspension(M(e).then(t=>{if(t==null)throw"No module named "+e;return t}))},uncaughtException:e=>{f(e)}}),Sk.builtins.self=Sk.ffi.proxy(self),_.resolve(!0)}function h(e){let{data:n}=e;if(n.type==="MODULE"){let{id:t,content:s}=n,r=l.get(t);if(r===void 0)return;let{resolve:o}=r;l.delete(t),o(s)}}self.addEventListener("message",h);importScripts("https://anvil.works/runtime-new/runtime/js/lib/skulpt.min.js","https://cdn.jsdelivr.net/npm/localforage@1.10.0/dist/localforage.min.js","https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuid.min.js");self.window=self;var{builtin:{func:k,none:{none$:U}},misceval:{asyncToPromise:b},ffi:{toJs:P},importMain:E}=Sk;y();j();self.addEventListener("sync",e=>{g("sync",{tag:e.tag})});function j(){function e(n,t=[]){if(n.length!==1)throw new Sk.builtin.TypeError("Expeceted one arg to raise_event");let s={};for(let r=0;r<t.length;r+=2){let o=t[r],c=t[r+1];s[o]=Sk.ffi.toJs(c)}g(n[0].toString(),s)}e.co_fastcall=!0,self.raise_event=new k(e),self.sync_event_handler=n=>t=>t.waitUntil(n(t))}async function L(e){let n=e.data,{type:t}=n;if(t!=="INIT")return;let{name:s}=n;try{await b(()=>E(s,!1,!0))}catch(r){console.error(r),f(r)}}self.addEventListener("message",L);async function m(e){e.ANVIL_LABS=!0;let n=await self.clients.matchAll({includeUncontrolled:!0,type:"window"});for(let t of n)t.postMessage(e)}self.postMessage=m;function g(e,n={}){n.event_name=e,m({type:"EVENT",name:e,kws:n})}
